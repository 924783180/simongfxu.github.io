<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>在React中畅游d3 - 第一篇</title>
    <style>
      svg {
        border: 1px solid #ccc;
      }
    </style>
  </head>
  <body>
    <div id="wrapper"></div>
    <script src="http://cdn.bootcss.com/babel-standalone/6.10.3/babel.min.js"></script>
    <script src="http://cdn.bootcss.com/react/15.2.1/react.min.js"></script>
    <script src="http://cdn.bootcss.com/react/15.2.1/react-dom.min.js"></script>
    <script src="http://cdn.bootcss.com/d3/4.1.1/d3.min.js"></script>
    <script type="text/babel">
    // http://bl.ocks.org/mbostock/0533f44f2cfabecc5e3a
    /**
     * 常量配置
     */
    let CONFIG = {
      width: 400, // 画布宽度
      height: 200 // 画布高度
    }

    let dataSource = d3.range(40).map(i => {
      return {x: i / 39,  y: (Math.sin(i / 3) + 2) / 4}
    }).map(i => {
      return i && {
        x: CONFIG.width * i.x,
        y: CONFIG.height * (1 - i.y)
      }
    })

    let path = d3.line().x(d => {
      return d.x
    }).y(d => {
      return d.y
    })(dataSource)

    class App extends React.Component {
      render() {
        return (
          <svg width={CONFIG.width} height={CONFIG.height}>
            <path d={path} fill="none" stroke="#666" stroke-width="2" />
          </svg>
        )
      }
    }

    ReactDOM.render(<App />, document.querySelector('#wrapper'))
    </script>
  </body>
</html>
